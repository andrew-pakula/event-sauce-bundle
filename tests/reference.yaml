andreo_event_sauce:
    time:
        recording_timezone: UTC
        clock: EventSauce\Clock\Clock # or your custom clock
    message:
        repository:
            json_encode_options:
                - !php/const JSON_PRETTY_PRINT
                - !php/const JSON_PRESERVE_ZERO_FRACTION
            doctrine:
                connection: doctrine.dbal.default_connection # or your custom doctrine dbal connection
                table_schema: EventSauce\MessageRepository\TableSchema\TableSchema # or your custom event message schema
                table_name: event_message # suffix event message table. Convention ${aggregate_name}_suffix
        serializer: EventSauce\EventSourcing\Serialization\ConstructingMessageSerializer
        decorator: true
        dispatcher:
            messenger:
                mode: event # enum of event, event_and_headers, message
            event_dispatcher: true
            chain:
                fooBus: barBus
    outbox:
        logger: outboxLogger
        back_off:
            exponential:
                initial_delay_ms: 100000
                max_tries: 10
            fibonacci:
                initial_delay_ms: 100000
                max_tries: 10
            linear:
                initial_delay_ms: 100000
                max_tries: 10
            no_waiting:
                max_tries: 10
            immediately:
                enabled: true
            custom:
                id: Foo/Bar/Baz
        relay_commit:
            delete:
                enabled: true
            mark_consumed:
                enabled: true
    snapshot:
        versioned: true
        store_strategy:
            every_n_event:
                number: 500
        repository:
            doctrine: true
        serializer: Andreo\EventSauceBundle\Snapshotting\SnapshotStateSerializer
    upcast:
        context: payload # enum of payload, message
    payload_serializer: Andreo\EventSauceBundle\Serialization\SymfonyPayloadSerializer
    uuid_encoder: EventSauce\UuidEncoding\UuidEncoder
    class_name_inflector: EventSauce\EventSourcing\ClassNameInflector
    aggregates:
        foo:
            class: App\Domain\Foo
            repository_alias: fooRepository
            outbox: true
            dispatchers:
                - fooBus
            upcast: true
            snapshot: true
        bar:
            class: App\Domain\Bar
            repository_alias: barRepository
            upcast: true
            snapshot: true